# Deployment Guide for Elective Management System

## Deploying to Render.com

### Prerequisites
1. GitHub account with your code repository
2. Render.com account
3. Dockerized application (✅ completed)

### Step 1: Prepare Your Repository

1. **Push your code to GitHub:**
   ```bash
   git add .
   git commit -m "Add Docker configuration and production settings"
   git push origin main
   ```

### Step 2: Deploy on Render

#### Option A: Using Render Dashboard (Recommended)

1. **Login to Render.com** and click "New +"
2. **Select "Web Service"**
3. **Connect your GitHub repository**
4. **Configure the service:**
   - **Name:** `elective-management-system`
   - **Environment:** `Docker`
   - **Dockerfile Path:** `./Dockerfile.prod`
   - **Instance Type:** `Free` (or `Starter` for better performance)

5. **Set Environment Variables:**
   ```
   DEBUG=0
   ALLOWED_HOSTS=*.onrender.com,localhost,127.0.0.1
   SECRET_KEY=[auto-generated by Render]
   DJANGO_SETTINGS_MODULE=PMS.settings_production
   ```

6. **Advanced Settings:**
   - **Build Command:** Leave empty (Docker handles this)
   - **Start Command:** Leave empty (Dockerfile handles this)
   - **Auto-Deploy:** `Yes`

#### Option B: Using render.yaml (Infrastructure as Code)

1. **Push the `render.yaml` file** to your repository
2. **In Render Dashboard:** Click "New +" → "Blueprint"
3. **Connect your repository** and Render will automatically configure everything

### Step 3: Database Setup (Optional - PostgreSQL)

For production, you might want to use PostgreSQL instead of SQLite:

1. **In Render Dashboard:** Click "New +" → "PostgreSQL"
2. **Configure:**
   - **Name:** `elective-db`
   - **Database:** `elective_management`
   - **User:** `elective_user`
   - **Region:** Same as your web service

3. **Update your web service environment variables:**
   ```
   DATABASE_URL=[automatically provided by Render]
   ```

### Step 4: Access Your Application

1. **Your app will be available at:** `https://your-service-name.onrender.com`
2. **Admin panel:** `https://your-service-name.onrender.com/admin/`
3. **Default admin credentials:**
   - Username: `admin`
   - Password: `adminpassword123`

### Step 5: Post-Deployment Setup

1. **Change default admin password** in the admin panel
2. **Upload initial data** (batches, streams, subjects) through admin
3. **Test the elective allocation functionality**

## Alternative Deployment Options

### Heroku
```bash
# Install Heroku CLI and login
heroku create elective-management-system
heroku addons:create heroku-postgresql:hobby-dev
heroku config:set DJANGO_SETTINGS_MODULE=PMS.settings_production
git push heroku main
```

### Railway
1. Connect your GitHub repository to Railway
2. Set environment variables in Railway dashboard
3. Deploy automatically

### DigitalOcean App Platform
1. Create new app from GitHub repository
2. Use Dockerfile.prod for deployment
3. Configure environment variables

## Troubleshooting

### Common Issues:

1. **Static files not loading:**
   - Ensure `STATIC_ROOT` is correctly set
   - Check if `collectstatic` runs successfully

2. **Database migrations fail:**
   - Check database connection
   - Ensure PostgreSQL addon is attached

3. **Application won't start:**
   - Check logs in Render dashboard
   - Verify environment variables

4. **Import errors:**
   - Ensure all dependencies are in `requirements.txt`
   - Check Python version compatibility

### Monitoring

- **Logs:** Available in Render dashboard
- **Metrics:** CPU, Memory, Response time in Render dashboard
- **Alerts:** Configure in Render settings

## Security Considerations

1. **Change default admin password** immediately
2. **Use environment variables** for sensitive data
3. **Enable HTTPS** (automatic on Render)
4. **Regular backups** of database
5. **Monitor application logs** for security issues

## Scaling

- **Upgrade instance type** for better performance
- **Add database connection pooling** for high traffic
- **Consider CDN** for static files
- **Implement caching** (Redis) if needed

## Environment Variables Reference

| Variable | Description | Example |
|----------|-------------|---------|
| `DEBUG` | Django debug mode | `0` (production) |
| `SECRET_KEY` | Django secret key | Auto-generated |
| `ALLOWED_HOSTS` | Allowed hostnames | `*.onrender.com` |
| `DATABASE_URL` | Database connection | Auto-provided |
| `DJANGO_SETTINGS_MODULE` | Settings module | `PMS.settings_production` |

## File Structure for Deployment

```
/home/abhiyan/Elective-Management-System-1/
├── Dockerfile              # Development Docker image
├── Dockerfile.prod         # Production Docker image  
├── docker-compose.yml      # Local development
├── render.yaml             # Render.com configuration
├── start.sh               # Startup script
├── requirements.txt       # Python dependencies
└── PMS/
    ├── PMS/
    │   ├── settings.py           # Base settings
    │   └── settings_production.py # Production settings
    └── manage.py
```
